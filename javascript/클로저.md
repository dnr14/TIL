# í´ë¡œì €

í´ë¡œì €ë¼ëŠ” ê°œë…ì€ ìë°”ìŠ¤í¬ë¦½ ê³ ìœ ì˜ ê°œë…ì´ ì•„ë‹ˆë‹¤. í•¨ìˆ˜ë¥¼ ì¼ê¸‰ê°ì²´ë¡œ ì·¨ê¸‰í•˜ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì–¸ì–´ì—ì„œ ì‚¬ìš©ë˜ëŠ”íŠ¹ì„±ì´ë‹¤.

---

> **ì¼ê¸‰ê°ì²´**
>
> 1. ë¦¬í„°ëŸ´ë¡œ ìƒì„±ì´ ê°€ëŠ¥í•´ì•¼ëœë‹¤. ëŸ°íƒ€ì„ì— ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê±¸ ì˜ë¯¸í•œë‹¤.
> 2. í•¨ìˆ˜ì˜ ì¸ìë¡œ ë„˜ê¸¸ ìˆ˜ ìˆì–´ì•¼ ëœë‹¤.
> 3. í•¨ìˆ˜ì˜ ë¦¬í„´ ê°’ìœ¼ë¡œ ì‚¬ìš© í•  ìˆ˜ ìˆì–´ì•¼ëœë‹¤.
> 4. ë³€ìˆ˜, ìë£Œêµ¬ì¡°ì— í• ë‹¹ í•  ìˆ˜ ìˆì–´ì•¼ëœë‹¤.

ê·¸ë˜ì„œ **í´ë¡œì €ë€?.**

---

> í´ë¡œì €ëŠ” í•¨ìˆ˜ì™€ ê·¸ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½ê³¼ì˜ ì¡°í•©ì´ë‹¤.

ì—¬ê¸°ì„œ í•µì‹¬ì€ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬í™˜ê²½ì´ë‹¤. ì•„ì§ ì˜ëª¨ë¥´ê² ë‹¤. ì˜ˆì œë¥¼ ë³´ë©´ì„œ ì´í•´í•´ë³´ì.

```jsx
const x = 1;

function foo() {
  const x = 10;
  bar();
}
function bar() {
  console.log(x);
}

foo(); // undefined
bar(); // 10
```

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/946a29d7-f5be-4957-b72d-dabba2554f7f/Untitled.png)

foo,barì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸

ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ **ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(ì •ì ìŠ¤ì½”í”„)**

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ í•¨ìˆ˜ê°€ ì–´ë””ì„œ í˜¸ì¶œ ë¬ëŠ”ì§€ê°€ ì•„ë‹ˆë¼ í•¨ìˆ˜ë¥¼ ì–´ë””ì— ì •ì˜í–ˆëŠ”ì§€ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” íŠ¹ì„±ì´ìˆë‹¤.

ìœ„ì— ì˜ˆì œë¥¼ ë³´ë©´ì„œ ì´í•´í•´ë³´ì.

1. fooì™€ barëŠ” ë‘˜ ë‹¤ ì „ì—­ì— ì„ ì–¸ ë˜ì–´ìˆë‹¤. ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì— íŠ¹ì„±ì— ë”°ë¼ ìƒìœ„ìŠ¤ì½”í”„ë¥¼ ì „ì—­ì„ ê°€ì§€ê²Œëœë‹¤.
2. foo í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ barë¥¼ í˜¸ì¶œí•˜ì—¬ë„ barì˜ ìŠ¤ì½”í”„ ê¸°ì¤€ì—ì„œ xë¥¼ ì°¾ê³  ìì‹  ìŠ¤ì½”í”„ì— x ë³€ìˆ˜ë¥¼ ì°¸ì¡° í•  ìˆ˜ ì—†ìœ¼ë‹ˆ ìƒìœ„ìŠ¤ì½”í”„(ì „ì—­)ìœ¼ë¡œ ì˜¬ë¼ê°€ì„œ xë¥¼ ì°¾ê²Œë˜ì–´ì„œ 10ì„ ì¶œë ¥í•˜ê²Œëœë‹¤.

**ìƒìœ„ ìŠ¤ì½”í”„ëŠ” ì–´ë–»ê²Œ ì°¾ëŠ”ê°€?**

> **ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì°¸ì¡°(Outer Lexical Environment Reference) OER**
>
> ìƒìœ„ ìŠ¤ì½”í”„ì— ëŒ€í•œ ì°¸ì¡°ëŠ” ê°ê°ì˜ ìŠ¤ì½”í”„(ë ‰ì‹œì»¬ í™˜ê²½)ì— ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ ì°¸ì¡°ë¥¼ í†µí•´ ì—°ê²°ë˜ì–´ìˆë‹¤. ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” ì´ìœ ì´ë‹¤.
>
> ---
>
> ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡°ì— ì €ì¥í•  ì°¸ì¡° ê°’ ì¦‰ ìƒìœ„ ìŠ¤ì½”í”„ì— ëŒ€í•œ ì°¸ì¡°ëŠ” í•¨ìˆ˜ ì •ì˜ê°€ í‰ê°€ë˜ëŠ” ì‹œì ì— í•¨ìˆ˜ê°€ ì •ì˜ëœ í™˜ê²½ì— ì˜í•´ ê²°ì •ëœë‹¤. ì´ê²ƒì´ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì´ë‹¤.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/40601b90-08c9-4854-be88-6e6bd3b3e2d3/Untitled.png)

í•µì‹¬ì€ í•¨ìˆ˜ ì •ì˜ê°€ í‰ê°€ë˜ì–´ í•¨ìˆ˜ ê°ì²´ê°€ ìƒì„±ë ë•Œ ì •í•´ì§„ë‹¤ë¼ëŠ” ê²ƒì´ë‹¤.

í•¨ìˆ˜ëŠ” ìì‹ ì˜ ë‚´ë¶€ìŠ¬ë¡¯ì— [[Environment]] ì— ìì‹ ì´ ì •ì˜ëœ í™˜ê²½ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì €ì¥í•œë‹¤.

ì—¬ê¸°ì„œ [[Environment]]ì™€ **ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì°¸ì¡°ì˜** ì´ í—·ê¹”ë¦´ ìˆ˜ ìˆë‹¤. ì •ë¦¬ë¥¼í•˜ìë©´

1.  í•¨ìˆ˜ê°€ ì •ì˜ ë¬ì„ë•Œ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì •ë³´ê°€ ë‹´ê²¨ìˆëŠ”ê²Œ [[Environment]]ë‚´ë¶€ìŠ¬ë¡¯ì´ë‹¤.
2.  í•¨ìˆ˜ê°€ í˜¸ì¶œ ë¬ì„ë•Œ ë ‰ì‹œì»¬ í™˜ê²½ì˜ ìƒìœ„ ë ‰ì‹œì»¬ í™˜ê²½ì„ ì°¸ì¡°í•˜ëŠ”ê²Œ **ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì°¸ì¡°**ì´ë‹¤.
3.  í•¨ìˆ˜ê°€ í˜¸ì¶œ ë˜ê³  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ë§Œë“¤ì–´ì§€ë©´ ë ‰ì‹œì»¬ í™˜ê²½ì— **ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì°¸ì¡°** ê°’ì€ í•¨ìˆ˜ì˜ [[Environment]]ë‚´ë¶€ìŠ¬ë¡¯ì„ ì°¸ì¡°í•œë‹¤.

> ğŸ“’ ê²°ë¡ 
>
> í‰ê°€ì™€ ì„ ì–¸ë ë•Œ [[Environment]]ë‚´ë¶€ìŠ¬ë¡¯ì— ìƒìœ„ ë ‰ì‹œì»¬ í™˜ê²½ì´ ì €ì¥ì´ë˜ê³  í˜¸ì¶œ ë¬ì„ë•Œ ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ ì°¸ì¡° ê°’ì„ ë‚´ë¶€ìŠ¬ë¡¯ì„ ë³´ê³  ê°’ì„ ë„£ëŠ”ë‹¤.

---

```jsx
const x = 1;

function foo() {
  const x = "barì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” fooì´ë‹¤.";
  function bar() {
    console.log(x);
  }
  return bar;
}

const bar = foo();
bar(); // barì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” fooì´ë‹¤.
```

ì‹¤í–‰ì„ í•´ë³´ë©´ fooí•¨ìˆ˜ëŠ” barë¥¼ ë¦¬í„´ì„í•œë‹¤. fooí•¨ìˆ˜ëŠ” barë¥¼ ë¦¬í„´ì„í•˜ê³  í•¨ìˆ˜ì˜ ìƒëª…ì£¼ê¸°ëŠ” ëì´ë‚¬ë‹¤. í•˜ì§€ë§Œ barë¥¼ í˜¸ì¶œí•˜ê²Œë˜ë©´ fooì˜ ì§€ì—­ë³€ìˆ˜ xë¥¼ ì°¸ì¡° í•  ìˆ˜ ìˆê²Œëœë‹¤.

ì´ì²˜ëŸ¼ ì™¸ë¶€í•¨ìˆ˜ë³´ë‹¤ ì¤‘ì²©í•¨ìˆ˜ê°€ ë” ì˜¤í•´ ìœ ì§€ë˜ëŠ” ê²½ìš° ì¤‘ì²©í•¨ìˆ˜ëŠ” ì´ë¯¸ ìƒëª…ì£¼ê¸°ê°€ ì¢…ë£Œí•œ ì™¸ë¶€í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ì¤‘ì²©í•¨ìˆ˜ë¥¼ í´ë¡œì €ë¼ê³  í•œë‹¤.

> fooí•¨ìˆ˜ì˜ ìƒëª…ì£¼ê¸°ê°€ ëë‚˜ê³  ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ì œê±°ê°€ ë˜ì–´ë„ barí•¨ìˆ˜ì˜ í´ë¡œì €ë¡œ ì¸í•´ fooí•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì€ ì†Œë©¸í•˜ì§€ ì•Šê³  ì‚´ì•„ìˆë‹¤. ë©”ëª¨ë¦¬ì— ë‚¨ì•„ìˆë‹¤ë¼ëŠ” ì†Œë¦¬ì´ë‹¤.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/012ffb1f-cc3a-42ba-96d1-db70738e0827/Untitled.png)

ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì–´ë–¤ ì‹ë³„ìë„ ì°¸ì¡°í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ëŠ” í´ë¡œì €ê°€ ì•„ë‹ˆë‹¤. ì°¸ì¡°ë¥¼ í•˜ì§€ì•ŠëŠ”ë° í´ë¡œì €ë¥¼ ë§Œë“¤ì–´ë²„ë¦°ë‹¤ë©´ ë©”ëª¨ë¦¬ ë‚­ë¹„ì´ë‹¤.

```jsx
const x = 1;

function foo() {
  const x = "barëŠ” í´ë¡œì €ê°€ ë§ì§€ë§Œ ë¶€ì í•©í•˜ë‹¤.";
  function bar() {
    console.log(x);
  }
  bar();
}

foo();
```

ìœ„ì— ì˜ˆì œì—ì„œëŠ” barí•¨ìˆ˜ëŠ” í´ë¡œì €ê°€ ë§ê¸´í•˜ë‹¤. í•˜ì§€ë§Œ ë³´í†µì˜ í´ë¡œì €ëŠ” ì™¸ë¶€í•¨ìˆ˜ ìƒëª…ì£¼ê¸°ë³´ë‹¤ ì¤‘ì²©í•¨ìˆ˜ì˜ ìƒëª…ì£¼ê¸°ê°€ ê¸¸ì—ˆì„ë•Œ í´ë¡œì €ë¼ê³  ë§í•œë‹¤. ì§€ê¸ˆ ì˜ˆì œì—ì„œëŠ” ì™¸ë¶€í•¨ìˆ˜ ì¤‘ì²©í•¨ìˆ˜ì˜ ìƒëª…ì£¼ê¸°ê°€ ë˜‘ê°™ë‹¤.

> ğŸ“’ í´ë¡œì € ê²°ë¡ 
> ì¤‘ì²© í•¨ìˆ˜ê°€ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ê³  ìˆê³  ì¤‘ì²© í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš°ì—ë§Œ í´ë¡œì €ì´ë‹¤.

---

ìƒìœ„ ìŠ¤ì½”í”„ì—ëŠ” ì‹ë³„ìê°€ x,yê°€ ìˆê³  ì°¸ì¡°í•˜ê³  ìˆëŠ” xë¥¼ ììœ ë³€ìˆ˜ë¼ê³  í•œë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—”ì§„ì€ í´ë¡œì €ê°€ ì°¸ì¡° í•˜ì§€ì•ŠëŠ” ì‹ë³„ìì—ëŠ” ê¸°ì–µí•˜ì§€ ì•ŠëŠ”ë‹¤. ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ì ìœ ë¥¼ ë°©ì§€í•œë‹¤.

---

### í´ë¡œì €ë¥¼ ì´ìš©í•œ ì •ë³´ì€ë‹‰ / ìº¡ìŠí™”

```jsx
let num = 0;

const increase = () => {
  return ++num;
};

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

ìœ„ ì½”ë“œëŠ” ì •ìƒì ìœ¼ë¡œ ì˜ ì‘ë™í•œë‹¤. í•˜ì§€ë§Œ num ë³€ìˆ˜ëŠ” ì „ì—­ë³€ìˆ˜ë¡œ ë…¸ì¶œì´ ë˜ì–´ìˆì–´ì„œ ê°œë°œìê°€ ëª¨ë¥´ëŠ”ê³³ì—ì„œ ì„ì˜ë¡œ ë³€ê²½ì´ ë˜ì–´ ì˜³ë°”ë¥¸ ê²°ê³¼ê°€ ì•ˆ ë‚˜ì˜¤ëŠ” `ë²„ê·¸ê°€ ìœ ë°œ` ë  ìˆ˜ ìˆë‹¤.

---

1. num ë³€ìˆ˜ì˜ ê°’ì€ inscrease í•¨ìˆ˜ê°€ í˜¸ì¶œ ë˜ê¸°ì „ì—ëŠ” ë³€ê²½ë˜ì§€ì•Šì•„ì•¼ ëœë‹¤.
2. num ë³€ìˆ˜ì˜ ê°’ì€ inscrease í•¨ìˆ˜ë§Œ ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤.

ìœ„ì— ì¡°ê±´ìœ¼ë¡œ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ì. ì´ë•Œ í´ë¡œì €ë¥¼ ì´ìš©í•˜ë©´ numë³€ìˆ˜ë¥¼ `ì€ë‹‰` \*\*\*\*í•  ìˆ˜ ìˆë‹¤.

---

```jsx
const increase = (() => {
  let num = 0;
  return function inner() {
    return ++num;
  };
})();

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

ì¦‰ì‹œì‹¤í–‰ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë ‰ì‹œì»¬ í™˜ê²½ì„ ë§Œë“¤ê³  innerí•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì—¬ ìƒìœ„ ìŠ¤ì½”í”„(ì¦‰ì‹œì‹¤í–‰ í•¨ìˆ˜ ë ‰ì‹œì»¬ í™˜ê²½)ë¥¼ ê¸°ì–µ í•  ìˆ˜ ìˆë„ë¡ numë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ì—¬ í´ë¡œì €ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

<aside>
ğŸ“Œ ì´ì²˜ëŸ¼ í´ë¡œì €ëŠ” ìƒíƒœê°€ ì˜ë„ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ì•ˆì „í•˜ê²Œ ì€ë‹‰í•˜ê³  íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•˜ì—¬ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

</aside>

---

### í´ë¡œì €ë¥¼ ì´ìš©í•œ counter

```jsx
const counter = (() => {
  let num = 0;
  return {
    inscrease() {
      return ++num;
    },
    decrease() {
      return --num < 0 ? 0 : num;
    },
  };
})();
```

ì¦ê°€,ê°ì†Œ ë©”ì†Œë“œê°€ ìˆëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ì´ë•Œ numë³€ìˆ˜ëŠ” ì€ë‹‰ì´ ëœë‹¤. ë¦¬í„´ê°’ì´ ê°ì²´ ë¦¬í„°ëŸ´ì´ì—¬ì„œ ë ‰ì‹œì»¬í™˜ê²½ì€ ë§Œë“¤ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤. inscrease, descreasì˜ `[[Environment]]`ëŠ” ì¦‰ì‹œì‹¤í–‰ í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½(ìƒìœ„ìŠ¤ì½”í”„) ì°¸ì¡°ê°’ì´ ë“¤ì–´ìˆë‹¤. inscrease, descreasê°€ í˜¸ì¶œì´ ë˜ë©´ OREì—ëŠ” Environmentì˜ ë‹´ê²¨ìˆëŠ” ê°’ì„ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ì±„ìš´ë‹¤.
